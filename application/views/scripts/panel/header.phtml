<script type="text/javascript">
// Create the menu bar
YAHOO.util.Event.onDOMReady(function () {
/** @todo mhaase: allow access to the logger from the interface when in development mode, and could logger errors go
 * to a logfile in production mode? 
 */
// Uncomment the next section when debugging YUI components
//var myLogReader = new YAHOO.widget.LogReader();
//myLogReader.hideCategory('info');

    YAHOO.util.Connect.asyncRequest('GET', 
                                    '/menu/main/format/json', 
                                    {
                                        success: function(o) {
                                            var menuData = YAHOO.lang.JSON.parse(o.responseText);
                                            var oMenuBar = new YAHOO.widget.MenuBar("mainmenu", { autosubmenudisplay: true });
                                            YAHOO.util.Dom.addClass(oMenuBar.element, "yuimenubarnav");
                                            oMenuBar.addItems(menuData.menubar);
                                            oMenuBar.render('menubar');                                            
                                        },
                                        failure: function(o) {alert('Failed to load menubar: '+o.statusText);}
                                    }, 
                                    null);
});



</script>

<div id="logo">
    <img alt="Logo" src="/images/logo.png">
</div>
<div id="logout">
    <?php echo new Fisma_Yui_Form_Button_Link('logoutButton', array('value' => 'Log Out', 'imageSrc' => '/images/logout.png', 'href' => '/auth/logout')); ?>
    <p><b><?php echo User::currentUser()->nameFirst . ' ' . User::currentUser()->nameLast; ?></b> is currently logged in</p>
</div>

<div id="menubar"><!-- YUI renders the menubar into this div --></div>
<div id="msgbar"><!-- Any user error messages are rendered into this div --></div>
