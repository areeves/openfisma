<?php
$uploadPanelButton = new Fisma_Yui_Form_Button('uploadPanelButton', 
                                               array('label' => 'Upload Document', 
                                                     'onClickFunction' => 'showUploadPanel'));
if (!Fisma_Acl::hasPrivilege('system', 'update', $this->organization->nickname)) {
    $uploadPanelButton->readOnly = true;
}
print $uploadPanelButton;

Fisma_Format_Section::startSection('System Documentation');
?>

<table border="1" class="systemDocuments">
    <tr>
        <th>File Name</th>
        <th>Size</th>
        <th>Version</th>
        <th>Version Notes</th>
        <th>Last Modified By User</th>
        <th>Last Modified Date</th>
        <th>View History</th>
    </tr>

<?php
foreach ($this->documents as $document) {
    print "<tr>"
        . "<td><a href='/system/download-document/id/{$document->id}'>"
        . "<img src='{$document->getIconUrl()}'>"
        . "<div>{$document->DocumentType->name}</div></a></td>"
        . "<td>{$document->getSizeKb()}</td>"
        . "<td align='center'>{$document->version}</td>"
        . "<td>{$document->description}</td>"
        . "<td>{$document->User->username}</td>"
        . "<td>{$document->updated_at}</td>"
        . "<td><a href='/panel/system-document/sub/view/id/$document->id'>Version History</a></td>"
        . "</tr>";
}
?>

</table>

<?php
Fisma_Format_Section::stopSection();
?>
