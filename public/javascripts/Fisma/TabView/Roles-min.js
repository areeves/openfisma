Fisma.TabView.Roles=function(){return{init:function(b,a,c){YAHOO.util.Event.addListener("role","change",function(d){YAHOO.util.Dom.batch(YAHOO.util.Dom.getChildren("role"),function(j){var g;var h=Fisma.tabView;var f=h.get("tabs");if(j.selected){var k=0;for(g in f){if(f[g].get("id")==j.value){k=1;break}}if(!k){for(g in b){if(b[g]["id"]==j.value){var e=$P.htmlspecialchars(b[g]["nickname"]);break}}var l=new YAHOO.widget.Tab({id:j.value,label:e,dataSrc:"/user/get-organization-subform/user/"+a+"/role/"+j.value+"/readOnly/"+c,cacheData:true,active:true});l.subscribe("dataLoadedChange",Fisma.prepareTab);h.addTab(l)}}else{for(g in f){if(f[g].get("id")==j.value){h.removeTab(f[g])}}}})})}}};