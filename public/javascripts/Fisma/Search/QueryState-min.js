(function(){var a=YAHOO.lang;var b=function(c,d){this._model=c;this._storage=new Fisma.Storage("Fisma.Search.QueryState")};b.TYPE_SIMPLE="simple";b.TYPE_ADVANCED="advanced";b.prototype={getState:function(){return this._storage.get(this._model)},setState:function(c){this._storage.set(this._model,c)},getSearchType:function(){var c=this.getState();if(!a.isObject(c)||!a.isValue(c.searchType)){return b.TYPE_SIMPLE}switch(c.searchType){case b.TYPE_SIMPLE:case b.TYPE_ADVANCED:return c.searchType;default:throw"Invalid search type encountered."}},setSearchType:function(d){var e=this.getState()||{},c={};c.searchType=d;if(d==="simple"){c.keywords=e.keywords||""}else{if(d==="advanced"){c.advancedQuery=e.advancedQuery||[]}else{throw"Invalid search type specified."}}this.setState(c)},getKeywords:function(){var c=this.getState();if(!a.isObject(c)||!a.isValue(c.keywords)){return""}return c.keywords},setKeywords:function(c){if(!a.isString(c)){throw"Can not set non-string as keywords."}if(this.getSearchType()!==b.TYPE_SIMPLE){throw"Attempting to save keywords for non-simple search."}var d=this.getState()||{};d.keywords=c;this.setState(d)},getAdvancedQuery:function(){var c=this.getState();if(!a.isObject(c)||!a.isObject(c.advancedQuery)){return{}}return c.advancedQuery},setAdvancedQuery:function(d){if(!a.isObject(d)){throw"Can not set non-object as advanced search query."}if(this.getSearchType()!==b.TYPE_ADVANCED){throw"Attempting to save advanced search query for non-advanced search."}var c=this.getState()||{};c.advancedQuery=d;this.setState(c)}};Fisma.Search.QueryState=b})();