Fisma.Finding={commentTable:null,commentCallback:function(f,b){var d=this;var c={timestamp:f.createdTs,username:f.username,comment:f.comment};this.commentTable.addRow(c);this.commentTable.sortColumn(this.commentTable.getColumn(0),YAHOO.widget.DataTable.CLASS_DESC);var a=new Fisma.Blinker(100,6,function(){d.commentTable.highlightRow(0)},function(){d.commentTable.unhighlightRow(0)});a.start();var e=document.getElementById("findingCommentsCount").firstChild;e.nodeValue++;b.hide();b.destroy()},editEcdJustification:function(){var a=document.getElementById("currentChangeDescription");a.style.display="none";var c;if(a.firstChild){c=a.firstChild.nodeValue}else{c=""}var b=document.createElement("input");b.type="text";b.value=c;b.name="finding[ecdChangeDescription]";a.parentNode.appendChild(b)},showSecurityControlSearch:function(){var b=document.getElementById("securityControlSearchButton");b.style.display="none";var a=document.getElementById("findingSecurityControlSearch");a.style.display="block"},handleSecurityControlSelection:function(){var a=document.getElementById("securityControlContainer");a.innerHTML='<img src="/images/loading_bar.gif">';var c=document.getElementById("finding[securityControlId]");var b=escape(c.value);YAHOO.util.Connect.asyncRequest("GET","/security-control/single-control/id/"+b,{success:function(d){a.innerHTML=d.responseText},failure:function(d){alert("Unable to load security control definition.")}})},deleteFinding:function(c,b){var a=new YAHOO.widget.SimpleDialog("warningDialog",{width:"300px",fixedcenter:true,visible:false,draggable:false,close:true,modal:true,text:"WARNING: You are about to delete the finding record. This action cannot be undone. Do you want to continue?",icon:YAHOO.widget.SimpleDialog.ICON_WARN,constraintoviewport:true,buttons:[{text:"Yes",handler:function(){document.location="/finding/remediation/delete/id/"+b.id;this.hide()}},{text:"No",handler:function(){this.hide()}}]});a.setHeader("Are you sure?");a.render(document.body);a.show()}};