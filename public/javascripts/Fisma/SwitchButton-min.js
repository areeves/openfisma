Fisma.SwitchButton=function(b,a,g,d){var c=this;if(b instanceof HTMLElement){this.element=b}else{this.element=document.getElementById(b);if(!this.element){throw'Invalid element name "'+name+'"'}}this.createDomElements();this.state=a;this.payload=d;if(!this.state){this.element.style.backgroundPositionX="-54px"}this.element.onclick=function(){c.toggleSwitch.call(c)};if(""!=g){var f=g.split(".");var e=window;for(piece in f){e=e[f[piece]];if(!e){throw"Specified callback does not exist: "+g}}if("function"==typeof e){this.callback=e}else{throw"Specified callback is not a function: "+g}}};Fisma.SwitchButton.prototype={createDomElements:function(){YAHOO.util.Dom.addClass(this.element,"switchButton");var c=document.createElement("span");YAHOO.util.Dom.addClass(c,"border");this.element.appendChild(c);var b=document.createElement("span");YAHOO.util.Dom.addClass(b,"spinner");var a=document.createElement("img");a.src="/images/spinners/small.gif";b.appendChild(a);this.element.appendChild(b);this.spinner=b},toggleSwitch:function(){var a;if(this.state){a={backgroundPositionX:{from:0,to:-54,unit:"px"}};this.state=false}else{a={backgroundPositionX:{from:-54,to:0,unit:"px"}};this.state=true}var b=new YAHOO.util.Anim(this.element,a,0.25,YAHOO.util.Easing.easeOut);b.animate();if(this.callback){this.callback(this)}},setBusy:function(a){if(a){this.spinner.style.visibility="visible"}else{this.spinner.style.visibility="hidden"}}};